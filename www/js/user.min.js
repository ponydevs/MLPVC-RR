DocReady.push(function(){var i=$("#signout"),e=$content.children("h1"),n=e.text().trim(),t=n===$sidebar.children(".welcome").find(".un").text().trim();$(".session-list").find("button.remove").off("click").on("click",function(e){e.preventDefault();var o="Removing session",s=$(this),a=s.closest("li"),l=s.parent(),r=l.text().trim(),c=l.next().children("strong"),u=c.length?" on <em>"+c.text().trim()+"</em>":"";if(0===a.index()){var g=/current/i.test(l.parent().children().last().text());if(g)return i.trigger("click")}var f=parseInt(s.attr("data-sid"));return"undefined"==typeof f||isNaN(f)||!isFinite(f)?$.Dialog.fail(o,"Could not locate Session ID, please reload the page and try again."):void $.Dialog.confirm(o,(t?"You":n)+" will be logged out form <em>"+r+"</em>"+u+".<br>Continue?",function(i){i&&($.Dialog.wait(o,"Signing out from "+r),$.post("/user/sessiondel/"+f,$.mkAjaxHandler(function(){return this.status?void(0!==a.siblings().length?(a.remove(),$.Dialog.close()):($.Dialog.success(o,"Session removed successfully"),HandleNav.reload(function(){$.Dialog.close()},2e3))):$.Dialog.fail(o,this.message)})))})}),$("#signout-everywhere").on("click",function(){var i="Sign out from ALL sessions";$.Dialog.confirm(i,"This will invalidate ALL sessions. Continue?",function(e){e&&($.Dialog.wait(i,"Signing out"),$.post("/signout?everywhere",$.mkAjaxHandler(function(){this.status?($.Dialog.success(i,this.message),HandleNav.reload(function(){$.Dialog.close()},1e3)):$.Dialog.fail(i,this.message)})))})}),$("#unlink").on("click",function(){var i="Unlink account & sign out";$.Dialog.confirm(i,"Are you sure you want to unlink your account?",function(e){e&&($.Dialog.wait(i,"Removing account link"),$.post("/signout?unlink",$.mkAjaxHandler(function(){this.status?($.Dialog.success(i,this.message),HandleNav.reload(function(){$.Dialog.close()},1e3)):$.Dialog.fail(i,this.message)})))})})});
//# sourceMappingURL=user.min.js.map
