function DocumentIsReady(){if($document.triggerHandler("paginate-refresh"),!(window.DocReady.length<1))for(var e=0,t=window.DocReady.length;t>e;e++)window.DocReady[e].call(window)}function OpenSidebarByDefault(){return window.matchMedia("all and (min-width: 1200px)").matches}!function(e){e.mk=function(){return e(document.createElement.apply(document,arguments))},e.urlToAbsolute=function(t){var n=e.mk("a");return n.href=t,n.href},e.extend(window,{$w:e(window),$document:e(document),$body:e(document.body),$head:e(document.head),$header:e("header"),$sbToggle:e(".sidebar-toggle"),$main:e("#main"),$content:e("#content"),$sidebar:e("#sidebar"),$footer:e("footer")}),window.$title=$head.children("title"),$w.on("ajaxerror",function(){e.Dialog.fail(!1,"There was an error while processing your request. You may find additional details in the browser's console.")}),e.mkAjaxHandler=function(e){return function(t){return"object"!=typeof t?(console.log(t),void $w.trigger("ajaxerror")):void("function"==typeof e&&e.call(t))}},e.fn.mkData=function(t){var n=e(this).serializeArray(),o={};return e.each(n,function(e,t){o[t.name]=t.value}),"object"==typeof t&&e.extend(o,t),o},e.getCSRFToken=function(){var e=document.cookie.match(/CSRF_TOKEN=([a-z\d]+)/i);if(e&&e.length)return e[1];throw new Error("Missing CSRF_TOKEN")},e.ajaxPrefilter(function(t,n){if("POST"===(n.type||t.type).toUpperCase()){var o=e.getCSRFToken();if("undefined"==typeof t.data&&(t.data=""),"string"==typeof t.data){var i=t.data.length>0?t.data.split("&"):[];i.push("CSRF_TOKEN="+o),t.data=i.join("&")}else t.data.CSRF_TOKEN=o}}),e.ajaxSetup({statusCode:{401:function(){e.Dialog.fail(void 0,"Cross-site Request Forgery attack detected. Please notify the site administartors.")},404:function(){e.Dialog.fail(void 0,"Error 404: The requested endpoint could not be found")},500:function(){e.Dialog.fail(!1,"The request failed due to an internal server error. If this persists, please open an issue on GitHub using the link in the footer!")}}}),e.copy=function(t){if(!document.queryCommandSupported("copy"))return prompt("Copy with Ctrl+C, close with Enter",t),!0;var n=e.mk("textarea"),o=!1;n.css({opacity:0,width:0,height:0,position:"fixed",left:"-10px",top:"50%",display:"block"}).text(t).appendTo("body").focus(),n.get(0).select();try{o=document.execCommand("copy")}catch(i){}o||e.Dialog.fail("Copy to clipboard","Copying text to clipboard failed!"),setTimeout(function(){n.remove()},1)},window.URL=function(t){var n=document.createElement("a"),o=this;n.href=t,e.each(["hash","host","hostname","href","origin","pathname","port","protocol","search"],function(e,t){o[t]=n[t]}),o.pathString=o.pathname+o.search+o.hash}}(jQuery),DocReady.push(function(){function e(e){return 10>e?"0"+e:e}function t(t){var n=new Date,o=new Date(t.attr("datetime")),i=getTimeDiff(n,o);if(i.past===!0||0===t.length){if(t.length>0){var r=t,s=r.parents("li").next().find("time");r.parents("li").remove()}return clearInterval(a),0===t.length||0===s.length?$("#upcoming").remove():window.setCD()}var c="in ";i.time<one.month?(i.week>0&&(i.day+=7*i.week),i.day>0&&(c+=i.day+" day"+(1!==i.day?"s":"")+" & "),i.hour>0&&(c+=i.hour+":"),c+=+e(i.minute)+":"+e(i.second)):c=createTimeStr(n,o),t.text(c)}var n=window.OAUTH_URL,o=localStorage.getItem("cookie_consent");$("#signin").on("click",function(){var e=$(this),t=function(t){t&&(localStorage.setItem("cookie_consent",1),e.attr("disabled",!0),$.Dialog.wait("Sign-in process","Redirecting you to DeviantArt",function(){window.location.href=n}))};void 0==o?$.Dialog.confirm("EU Cookie Policy Notice",'In compliance with the <a href="http://ec.europa.eu/ipg/basics/legal/cookies/index_en.htm">EU Cookie Policy</a> we must inform you that our website will store cookies on your device to remember your logged in status between browser sessions.<br><br>If you would like to avoid these completly harmless pieces of information required to use this website, click "Decline" and continue browsing as a guest.<br><br>This warning will not appear again if you accept our use of persistent cookies.',["Accept","Decline"],t):t(!0)}),$("#signout").on("click",function(){var e="Sign out";$.Dialog.confirm(e,"Are you sure you want to sign out?",function(t){t&&($.Dialog.wait(e,"Signing out"),$.post("/signout",$.mkAjaxHandler(function(){this.status?($.Dialog.success(e,this.message),setTimeout(function(){HandleNav(location.href,function(){$.Dialog.close()})},1e3)):$.Dialog.fail(e,this.message)})))})});var i,a,r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];window.setCD=function(){var e=$("#upcoming");0!==e.length&&(i=e.find("li").first().find("time").addClass("nodt"),a=setInterval(function(){t(i)},1e3),t(i),e.find("li").each(function(){var e=$(this),t=e.children(".calendar"),n=new Date(e.find(".countdown").data("airs")||e.find("time").attr("datetime"));t.children(".top").text(r[n.getMonth()]),t.children(".bottom").text(n.getDate())}),window.updateTimesF())},window.setCD(),$w.on("unload",function(){clearInterval(a)})});var DocReadyOnce=!1;$(function(){function e(e){if(e.which>2)return!0;var n=this;return n.hostname===location.hostname&&a.test(n.pathname)?(e.preventDefault(),void t(this.href)):!0}function t(e,t){o!==!1&&(o.abort(),o=!1);var i="Navigation";n.addClass("loading"),o=$.ajax({url:e,data:{"via-js":!0},success:$.mkAjaxHandler(function(){this.status||$.Dialog.fail(i,this.message),e=new URL(this.responseURL+new URL(e).hash).pathString,$w.triggerHandler("unload"),OpenSidebarByDefault()||$sbToggle.trigger("sb-close");var a=this.css,r=this.js,s=this.content,c=this.sidebar,d=this.footer,l=this.title,u=this.avatar;$main.empty();var f=!1,h=new URL(location.href),p=h.pathString===e;return n.children("script[src], script[data-src]").each(function(){var e=$(this),t=e.attr("src")||e.attr("data-src"),n=r.indexOf(t);if(p||-1===n){if(-1!==t.indexOf("global"))return f=!0,!1;e.remove()}else r.splice(n,1)}),f?location.href=e:($head.children("link[href], style[href]").each(function(){var e=$(this),t=e.attr("href"),n=a.indexOf(t);-1!==n?a.splice(n,1):e.remove()}),console.clear(),void function g(i){if(i>=a.length){$main.addClass("pls-wait").html(s),$sidebar.html(c),$footer.html(d),window.updateTimesF();var f=$header.find("nav").children();return f.children().first().children("img").attr("src",u),f.children(":not(:first-child)").remove(),f.append($sidebar.find("nav").children().children().clone()),$title.text(l),history[h.pathString===e?"replaceState":"pushState"]({"via-js":!0},"",e),window.DocReady=[],function m(e){if(e>=r.length)return DocumentIsReady(),n.removeClass("loading"),$main.removeClass("pls-wait"),"function"==typeof t&&t(),void(o=!1);var i=r[e];o=$.ajax({url:i,dataType:"text",success:function(t){n.append($.mk("script").attr("data-src",i).text(t)),m(e+1)}})}(0)}var p=a[i];o=$.ajax({url:p,dataType:"text",success:function(e){$head.append($.mk("style").attr("href",p).text(e)),g(i+1)}})}(0))})})}if(!DocReadyOnce){DocReadyOnce=!0;var n=$(document.body),o=!1;$sbToggle.off("click").on("click",function(e){e.preventDefault(),o===!1&&$sbToggle.trigger("sb-"+(n.hasClass("sidebar-open")?"close":"open"))}).on("sb-open sb-close",function(e){var t="close"===e.type.substring(3);n[t?"removeClass":"addClass"]("sidebar-open"),localStorage[t?"setItem":"removeItem"]("sidebar-closed","true")});var i="true"!==localStorage.getItem("sidebar-closed");OpenSidebarByDefault()||(i=!i),i&&n.addClass("sidebar-open");var a=window.REWRITE_REGEX;$document.off("click","a[href]",e).on("click","a[href]",e),$w.off("popstate").on("popstate",function(e){var n=e.originalEvent.state;return n["via-js"]?void t(location.href,n):$w.trigger("nav-popstate",[n])}),window.HandleNav=function(){t.apply(window,arguments)},DocumentIsReady()}}),$w.on("load",function(){$body.removeClass("loading")});
//# sourceMappingURL=global.min.js.map