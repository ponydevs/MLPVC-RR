function DocumentIsReady(){"use strict";$d.triggerHandler("paginate-refresh");var e=window.OAUTH_URL,t=localStorage.getItem("cookie_consent");$("#signin").off("click").on("click",function(){var n=$(this),a=function(t){t&&(localStorage.setItem("cookie_consent",1),n.attr("disabled",!0),$.Dialog.wait("Sign-in process","Redirecting you to DeviantArt",function(){window.location.href=e}))};t?a(!0):$.Dialog.confirm("EU Cookie Policy Notice",'In compliance with the <a href="http://ec.europa.eu/ipg/basics/legal/cookies/index_en.htm">EU Cookie Policy</a> we must inform you that our website will store cookies on your device to remember your logged in status between browser sessions.<br><br>If you would like to avoid these completly harmless pieces of information required to use this website, click "Decline" and continue browsing as a guest.<br><br>This warning will not appear again if you accept our use of persistent cookies.',["Accept","Decline"],a)}),$("#signout").off("click").on("click",function(){var e="Sign out";$.Dialog.confirm(e,"Are you sure you want to sign out?",function(t){t&&($.Dialog.wait(e,"Signing out"),$.post("/signout",$.mkAjaxHandler(function(){if(this.status){var t=this.message;HandleNav(location.href,function(){$.Dialog.success(e,t),setTimeout(function(){$.Dialog.close()},1500)})}else $.Dialog.fail(e,this.message)})))})});var n;$(".send-feedback").off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),"undefined"==typeof n&&(n=$.mk("form").attr("id","feedback-form").append($.mk("p").text("Your opinion matters. If you're having an issue with the site, or just want to say how great it is, this is the place to do do."),$.mk("p").html("Your message will be sent directly to the developer, and you'll be able to communicate with him using the <a href='/feedback'>Feedback</a> section of the site."),$.mk("label").append($.mk("span").text("Subject (5-120 chars.)"),$.mk("input").attr({name:"subject",maxlength:120,placeholder:"Enter subject",pattern:PRINTABLE_ASCII_REGEX.replace("+","{5,120}"),required:!0})),$.mk("label").append($.mk("span").text("Message (10-500 chars.)"),$.mk("textarea").attr({name:"message",maxlength:500,placeholder:"Enter message",pattern:PRINTABLE_ASCII_REGEX.replace("+","{10,500}"),required:!0})))),$.Dialog.request("Send feedback",n.clone(!0,!0),"feedback-form","Send",function(e){e.on("submit",function(t){t.preventDefault();var n=e.mkData();return n.subject.length<5||n.subject.length>120?$.Dialog.fail(!1,"The subject must be between 5 and 120 characters (you entered "+n.subject.length+")."):n.message.length<10||n.message.length>500?$.Dialog.fail(!1,"Your message must be between 10 and 500 characters (you entered "+n.message.length+")."):void $.post("/feedback",n,$.mkAjaxHandler(function(){return this.status?void $.Dialog.success(!1,this.message,!0):$.Dialog.fail(!1,this.message)}))})})});var a=window.DocReady.length;if(a)for(var o=0;a>o;o++)window.DocReady[o].call(window)}function OpenSidebarByDefault(){"use strict";return window.matchMedia("all and (min-width: 1200px)").matches}!function(e){"use strict";var t=function(){return document.createElement.apply(document,arguments)};window.mk=function(){return t.apply(window,arguments)},e.mk=function(){return e(document.createElement.apply(document,arguments))},e.urlToAbsolute=function(e){var n=t("a");return n.href=e,n.href},window.$w=e(window),window.$d=e(document),window.CommonElements=function(){window.$header=e("header"),window.$sbToggle=e(".sidebar-toggle"),window.$main=e("#main"),window.$content=e("#content"),window.$sidebar=e("#sidebar"),window.$footer=e("footer"),window.$body=e("body"),window.$head=e("head"),window.$navbar=$header.find("nav")},window.CommonElements(),window.Key={Enter:13,Space:32,LeftArrow:37,RightArrow:39,Tab:9,Comma:188},e.isKey=function(e,t){return t.keyCode===e},e.capitalize=function(e,t){return t?e.replace(/((?:^|\s)[a-z])/g,function(e){return e.toUpperCase()}):1===e.length?e.toUpperCase():e[0].toUpperCase()+e.substring(1)},"function"!=typeof Array.prototype.includes&&(Array.prototype.includes=function(e){return-1!==this.indexOf(e)}),e.pad=function(e,t,n,a){for("string"!=typeof e&&(e=""+e),"string"!=typeof t&&(t="0"),("number"!=typeof n||!isFinite(n)||isNaN(n))&&(n=2),"boolean"!=typeof a&&(a=!0);e.length<n;)e=a?t+e:e+t;return e},$w.on("ajaxerror",function(){var t="";if(arguments.length>1){var n=[].slice.call(arguments,1);if("abort"===n[1])return;t=" Details:<pre><code>"+n.slice(1).join("\n").replace(/</g,"&lt;")+"</code></pre>",t+=" Response body:<pre><code>"+n[0].responseText.replace(/</g,"&lt;")+"</code></pre>"}e.Dialog.fail(!1,"There was an error while processing your request."+t)}),e.mkAjaxHandler=function(e){return function(t){return"object"!=typeof t?(console.log(t),void $w.triggerHandler("ajaxerror")):void("function"==typeof e&&e.call(t))}},e.callCallback=function(t,n,a){return"object"==typeof n&&e.isArray(n)||(a=n,n=[]),"function"!=typeof t?a:t.apply(window,n)},e.fn.mkData=function(t){var n=e(this).serializeArray(),a={};return e.each(n,function(e,t){a[t.name]=t.value}),"object"==typeof t&&e.extend(a,t),a},e.getCSRFToken=function(){var e=document.cookie.match(/CSRF_TOKEN=([a-z\d]+)/i);if(e&&e.length)return e[1];throw new Error("Missing CSRF_TOKEN")},e.ajaxPrefilter(function(t,n){if("POST"===(n.type||t.type).toUpperCase()){var a=e.getCSRFToken();if("undefined"==typeof t.data&&(t.data=""),"string"==typeof t.data){var o=t.data.length>0?t.data.split("&"):[];o.push("CSRF_TOKEN="+a),t.data=o.join("&")}else t.data.CSRF_TOKEN=a}}),e.ajaxSetup({dataType:"json",error:function(){$w.triggerHandler("ajaxerror",[].slice.call(arguments))},statusCode:{401:function(){e.Dialog.fail(void 0,"Cross-site Request Forgery attack detected. Please notify the site administartors.")},404:function(){e.Dialog.fail(void 0,"Error 404: The requested endpoint could not be found")},500:function(){e.Dialog.fail(!1,"The request failed due to an internal server error. If this persists, please open an issue on GitHub using the link in the footer!")}}}),e.copy=function(t){if(!document.queryCommandSupported("copy"))return prompt("Copy with Ctrl+C, close with Enter",t),!0;var n=e.mk("textarea"),a=!1;n.css({opacity:0,width:0,height:0,position:"fixed",left:"-10px",top:"50%",display:"block"}).text(t).appendTo("body").focus(),n.get(0).select();try{a=document.execCommand("copy")}catch(o){}a||e.Dialog.fail("Copy to clipboard","Copying text to clipboard failed!"),setTimeout(function(){n.remove()},1)},e.hex2rgb=function(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)}},e.rgb2hex=function(e){return"#"+(16777216+(e.r<<16)+(e.g<<8)+e.b).toString(16).toUpperCase().substring(1)},"function"!=typeof e.expr[":"].valid&&e.extend(e.expr[":"],{valid:function(e){return e.validity.valid}}),e.roundTo=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},window.URL=function(t){var n=document.createElement("a"),a={};return n.href=t,e.each(["hash","host","hostname","href","origin","pathname","port","protocol","search"],function(e,t){a[t]=n[t]}),a.pathString=a.pathname.replace(/^([^\/].*)$/,"/$1")+a.search+a.hash,a}}(jQuery);var DocReadyOnce=!1;$(function(){"use strict";function e(e){return 10>e?"0"+e:e}function t(){var t,n,a="function"==typeof i.parent&&i.parent().length>0,o={};if(a&&(t=new Date,n=new Date(i.attr("datetime")),o=getTimeDiff(t,n)),!a||o.past)return a&&i.parents("li").remove(),clearInterval(r),window.setCD();var s="in ";o.time<one.month?(o.week>0&&(o.day+=7*o.week),o.day>0&&(s+=o.day+" day"+(1!==o.day?"s":"")+" & "),o.hour>0&&(s+=o.hour+":"),s+=e(o.minute)+":"+e(o.second)):s=createTimeStr(t,n),i.text(s)}function n(e){if(e.which>2)return!0;var t=this;return t.hostname!==location.hostname||!c.test(t.pathname)&&!/^\/@([A-Za-z\-\d]{1,20})$/.test(t.pathname)?!0:t.pathname===location.pathname&&t.search===location.search?!0:(0!==$(this).parents("#dialogContent").length&&$.Dialog.close(),e.preventDefault(),void a(this.href))}function a(e,t,n){o!==!1&&(o.abort(),o=!1);var a="Navigation";$body.addClass("loading");var i=$.ajax({url:e,data:{"via-js":!0},success:$.mkAjaxHandler(function(){if(o===i){if(!this.status)return $body.removeClass("loading"),o=!1,$.Dialog.fail(a+" error",this.message);e=new URL(this.responseURL+new URL(e).hash).pathString,$w.triggerHandler("unload"),OpenSidebarByDefault()||$sbToggle.trigger("sb-close");var r=this.css,s=this.js,c=this.content,d=this.sidebar,u=this.footer,f=this.title,p=this.avatar;$main.empty();var h=!1,g=new URL(location.href),m=!n&&g.pathString===e;if($body.children("script[src], script[data-src]").each(function(){var e=$(this),t=e.attr("src")||e.attr("data-src");if(m)return/js\/dialog\./.test(t)||e.remove(),!0;var n=s.indexOf(t);if(-1===n||/js\/colorguide[\.\-]/.test(t)){if(-1!==t.indexOf("global"))return!(h=!0);e.remove()}else s.splice(n,1)}),h!==!1)return location.href=e,location.href;var w="link[href], style[href]";$head.children(w).each(function(){var e=$(this),t=e.attr("href"),n=r.indexOf(t);-1!==n?r.splice(n,1):e.attr("data-remove","true")}),console.clear(),function y(n){if(n>=r.length){$head.children(w.replace(/href/g,"data-remove=true")).remove(),$main.addClass("pls-wait").html(c),$sidebar.html(d),$footer.html(u),window.updateTimes(),window.setCD();var a=$header.find("nav").children();return a.children().first().children("img").attr("src",p),a.children(":not(:first-child)").remove(),a.append($sidebar.find("nav").children().children().clone()),document.title=(f?f+" - ":"")+l,window.CommonElements(),history[g.pathString===e?"replaceState":"pushState"]({"via-js":!0},"",e),window.DocReady=[],function h(e){if(e>=s.length)return DocumentIsReady(),$body.removeClass("loading"),$main.removeClass("pls-wait"),$.callCallback(t),void(o=!1);var n=s[e];o=$.ajax({url:n,dataType:"text",success:function(t){$body.append($.mk("script").attr("data-src",n).text(t)),h(e+1)}})}(0)}var i=r[n];o=$.ajax({url:i,dataType:"text",success:function(e){e=e.replace(/url\((['"])?\.\.\//g,"url($1/"),$head.append($.mk("style").attr("href",i).text(e)),y(n+1)}})}(0)}})});o=i}if(!DocReadyOnce){DocReadyOnce=!0;var o=!1;$sbToggle.off("click").on("click",function(e){e.preventDefault(),o===!1&&$sbToggle.trigger("sb-"+($body.hasClass("sidebar-open")?"close":"open"))}).on("sb-open sb-close",function(e){var t="close"===e.type.substring(3);$body[t?"removeClass":"addClass"]("sidebar-open"),localStorage[t?"setItem":"removeItem"]("sidebar-closed","true")}),"true"!==localStorage.getItem("sidebar-closed")&&OpenSidebarByDefault()&&$body.addClass("sidebar-open");var i,r,s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];window.setCD=function(){var e=$("#upcoming");if(e.length){var n=e.children("ul").children();if(!n.length)return e.remove();i=n.first().find("time").addClass("nodt"),r=setInterval(t,1e3),t(),e.find("li").each(function(){var e=$(this),t=e.children(".calendar"),n=new Date(e.find(".countdown").data("airs")||e.find("time").attr("datetime"));t.children(".top").text(s[n.getMonth()]),t.children(".bottom").text(n.getDate())}),window.updateTimes()}},window.setCD(),$w.on("unload",function(){i={length:0}});var c=window.REWRITE_REGEX,l=window.SITE_TITLE;$d.off("click","a[href]",n).on("click","a[href]",n),$w.off("popstate").on("popstate",function(e){var t=e.originalEvent.state;return null===t||t["via-js"]?void a(location.href,void 0,!0):$w.trigger("nav-popstate",[t])}),window.HandleNav=function(){a.apply(window,arguments)};var d=function(e,t){var n="number"==typeof t&&t>0?function(){setTimeout(e,t)}:e;a(location.pathname,n)};window.HandleNav.reload=function(){d.apply(window,arguments)},DocumentIsReady()}}),$w.on("load",function(){"use strict";$body.removeClass("loading")});
//# sourceMappingURL=global.min.js.map
