function DocumentIsReady(){$document.triggerHandler("paginate-refresh");var e=window.OAUTH_URL,t=localStorage.getItem("cookie_consent");$("#signin").off("click").on("click",function(){var n=$(this),o=function(t){t&&(localStorage.setItem("cookie_consent",1),n.attr("disabled",!0),$.Dialog.wait("Sign-in process","Redirecting you to DeviantArt",function(){window.location.href=e}))};void 0==t?$.Dialog.confirm("EU Cookie Policy Notice",'In compliance with the <a href="http://ec.europa.eu/ipg/basics/legal/cookies/index_en.htm">EU Cookie Policy</a> we must inform you that our website will store cookies on your device to remember your logged in status between browser sessions.<br><br>If you would like to avoid these completly harmless pieces of information required to use this website, click "Decline" and continue browsing as a guest.<br><br>This warning will not appear again if you accept our use of persistent cookies.',["Accept","Decline"],o):o(!0)}),$("#signout").off("click").on("click",function(){var e="Sign out";$.Dialog.confirm(e,"Are you sure you want to sign out?",function(t){t&&($.Dialog.wait(e,"Signing out"),$.post("/signout",$.mkAjaxHandler(function(){this.status?($.Dialog.success(e,this.message),setTimeout(function(){HandleNav(location.href,function(){$.Dialog.close()})},1e3)):$.Dialog.fail(e,this.message)})))})});var n=window.DocReady.length;if(n)for(var o=0;n>o;o++)window.DocReady[o].call(window)}function OpenSidebarByDefault(){return window.matchMedia("all and (min-width: 1200px)").matches}!function(e){e.mk=function(){return e(document.createElement.apply(document,arguments))},e.urlToAbsolute=function(t){var n=e.mk("a");return n.href=t,n.href},window.$w=e(window),window.$document=e(document),window.$body=e(document.body),window.$head=e(document.head),window.CommonElements=function(){e.extend(window,{$header:e("header"),$sbToggle:e(".sidebar-toggle"),$main:e("#main"),$content:e("#content"),$sidebar:e("#sidebar"),$footer:e("footer")}),window.$navbar=$header.find("nav")},window.CommonElements(),$w.on("ajaxerror",function(){e.Dialog.fail(!1,"There was an error while processing your request. You may find additional details in the browser's console.")}),e.mkAjaxHandler=function(e){return function(t){return"object"!=typeof t?(console.log(t),void $w.trigger("ajaxerror")):void("function"==typeof e&&e.call(t))}},e.fn.mkData=function(t){var n=e(this).serializeArray(),o={};return e.each(n,function(e,t){o[t.name]=t.value}),"object"==typeof t&&e.extend(o,t),o},e.getCSRFToken=function(){var e=document.cookie.match(/CSRF_TOKEN=([a-z\d]+)/i);if(e&&e.length)return e[1];throw new Error("Missing CSRF_TOKEN")},e.ajaxPrefilter(function(t,n){if("POST"===(n.type||t.type).toUpperCase()){var o=e.getCSRFToken();if("undefined"==typeof t.data&&(t.data=""),"string"==typeof t.data){var a=t.data.length>0?t.data.split("&"):[];a.push("CSRF_TOKEN="+o),t.data=a.join("&")}else t.data.CSRF_TOKEN=o}}),e.ajaxSetup({statusCode:{401:function(){e.Dialog.fail(void 0,"Cross-site Request Forgery attack detected. Please notify the site administartors.")},404:function(){e.Dialog.fail(void 0,"Error 404: The requested endpoint could not be found")},500:function(){e.Dialog.fail(!1,"The request failed due to an internal server error. If this persists, please open an issue on GitHub using the link in the footer!")}}}),e.copy=function(t){if(!document.queryCommandSupported("copy"))return prompt("Copy with Ctrl+C, close with Enter",t),!0;var n=e.mk("textarea"),o=!1;n.css({opacity:0,width:0,height:0,position:"fixed",left:"-10px",top:"50%",display:"block"}).text(t).appendTo("body").focus(),n.get(0).select();try{o=document.execCommand("copy")}catch(a){}o||e.Dialog.fail("Copy to clipboard","Copying text to clipboard failed!"),setTimeout(function(){n.remove()},1)},window.URL=function(t){var n=document.createElement("a"),o=this;n.href=t,e.each(["hash","host","hostname","href","origin","pathname","port","protocol","search"],function(e,t){o[t]=n[t]}),o.pathString=o.pathname+o.search+o.hash}}(jQuery);var DocReadyOnce=!1;$(function(){function e(e){return 10>e?"0"+e:e}function t(){var t="function"==typeof r.parent&&r.parent().length>0;if(t)var n=new Date,o=new Date(r.attr("datetime")),a=getTimeDiff(n,o);if(!t||a.past)return t&&r.parents("li").remove(),clearInterval(s),window.setCD();var i="in ";a.time<one.month?(a.week>0&&(a.day+=7*a.week),a.day>0&&(i+=a.day+" day"+(1!==a.day?"s":"")+" & "),a.hour>0&&(i+=a.hour+":"),i+=e(a.minute)+":"+e(a.second)):i=createTimeStr(n,o),r.text(i)}function n(e){if(e.which>2)return!0;var t=this;return t.hostname===location.hostname&&d.test(t.pathname)?t.pathname===location.pathname&&t.search===location.search?!0:(e.preventDefault(),void o(this.href)):!0}function o(e,t){i!==!1&&(i.abort(),i=!1);var n="Navigation";a.addClass("loading"),i=$.ajax({url:e,data:{"via-js":!0},success:$.mkAjaxHandler(function(){this.status||$.Dialog.fail(n,this.message),e=new URL(this.responseURL+new URL(e).hash).pathString,$w.triggerHandler("unload"),OpenSidebarByDefault()||$sbToggle.trigger("sb-close");var o=this.css,r=this.js,s=this.content,c=this.sidebar,d=this.footer,u=this.title,f=this.avatar;$main.empty();var h=!1,m=new URL(location.href),p=m.pathString===e;return a.children("script[src], script[data-src]").each(function(){var e=$(this);if(p)return e.remove(),!0;var t=e.attr("src")||e.attr("data-src"),n=r.indexOf(t);if(-1!==n)r.splice(n,1);else{if(-1!==t.indexOf("global"))return!(h=!0);e.remove()}}),h!==!1?location.href=e:($head.children("link[href], style[href]").each(function(){var e=$(this),t=e.attr("href"),n=o.indexOf(t);-1!==n?o.splice(n,1):e.remove()}),console.clear(),void function g(n){if(n>=o.length){$main.addClass("pls-wait").html(s),$sidebar.html(c),$footer.html(d),window.updateTimes(),window.setCD();var h=$header.find("nav").children();return h.children().first().children("img").attr("src",f),h.children(":not(:first-child)").remove(),h.append($sidebar.find("nav").children().children().clone()),document.title=(u?u+" - ":"")+l,window.CommonElements(),history[m.pathString===e?"replaceState":"pushState"]({"via-js":!0},"",e),window.DocReady=[],function w(e){if(e>=r.length)return DocumentIsReady(),a.removeClass("loading"),$main.removeClass("pls-wait"),"function"==typeof t&&t(),void(i=!1);var n=r[e];i=$.ajax({url:n,dataType:"text",success:function(t){a.append($.mk("script").attr("data-src",n).text(t)),w(e+1)}})}(0)}var p=o[n];i=$.ajax({url:p,dataType:"text",success:function(e){$head.append($.mk("style").attr("href",p).text(e)),g(n+1)}})}(0))})})}if(!DocReadyOnce){DocReadyOnce=!0;var a=$(document.body),i=!1;$sbToggle.off("click").on("click",function(e){e.preventDefault(),i===!1&&$sbToggle.trigger("sb-"+(a.hasClass("sidebar-open")?"close":"open"))}).on("sb-open sb-close",function(e){var t="close"===e.type.substring(3);a[t?"removeClass":"addClass"]("sidebar-open"),localStorage[t?"setItem":"removeItem"]("sidebar-closed","true")}),"true"!==localStorage.getItem("sidebar-closed")&&OpenSidebarByDefault()&&a.addClass("sidebar-open");var r,s,c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];window.setCD=function(){var e=$("#upcoming");if(e.length){var n=e.children("ul").children();if(!n.length)return e.remove();r=n.first().find("time").addClass("nodt"),s=setInterval(t,1e3),t(),e.find("li").each(function(){var e=$(this),t=e.children(".calendar"),n=new Date(e.find(".countdown").data("airs")||e.find("time").attr("datetime"));t.children(".top").text(c[n.getMonth()]),t.children(".bottom").text(n.getDate())}),window.updateTimes()}},window.setCD(),$w.on("unload",function(){r={length:0}});var d=window.REWRITE_REGEX,l=window.SITE_TITLE;$document.off("click","a[href]",n).on("click","a[href]",n),$w.off("popstate").on("popstate",function(e){var t=e.originalEvent.state;return null===t||t["via-js"]?void o(location.href):$w.trigger("nav-popstate",[t])}),window.HandleNav=function(){o.apply(window,arguments)},o.reload=function(e,t){var n="number"==typeof t&&t>0?function(){setTimeout(e,t)}:e;o(location.pathname,n)},window.HandleNav.reload=function(){o.reload.apply(window,arguments)},DocumentIsReady()}}),$w.on("load",function(){$body.removeClass("loading")});
//# sourceMappingURL=global.min.js.map