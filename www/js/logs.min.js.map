{"version":3,"sources":["logs.js"],"names":["DocReady","push","requesting","$","find","off","on","this","children","each","$row","$this","title","hasClass","toggleClass","next","stop","slideUp","length","slideDown","EntryID","parseInt","first","text","post","mkAjaxHandler","status","Dialog","fail","message","$dataDiv","mk","attr","css","details","i","el","test","append","join","insertAfter","always","trigger","ww","window","width","$td","parent","$tr","$ip","clone","html","split","info","trim","replace"],"mappings":"AAAAA,SAASC,KAAK,WACb,GAAIC,IAAa,CAEjBC,GAAE,SAASC,KAAK,SAASC,IAAI,eAAeC,GAAG,cAAc,WAC5DH,EAAEI,MAAMC,WAAWC,KAAK,WACvB,GAAIC,GAAOP,EAAEI,KAEbG,GAAKN,KAAK,mBAAmBC,IAAI,SAASC,GAAG,QAAQ,WACpD,GAAIK,GAAQR,EAAEI,MACbK,EAAQ,mBAET,IAAID,EAAME,SAAS,eAAgBF,EAAMG,YAAY,0BAA0BC,OAAOC,OAAOC,cAE5F,IAA4B,IAAxBN,EAAMI,OAAOG,OAChBP,EAAMG,YAAY,0BAA0BC,OAAOC,OAAOG,gBACtD,CACJ,GAAIjB,EAAY,OAAO,CACvBA,IAAa,CAEb,IAAIkB,GAAUC,SAASX,EAAKF,WAAWc,QAAQC,OAE/CpB,GAAEqB,KAAK,iBAAiBJ,EAASjB,EAAEsB,cAAc,WAC3ClB,KAAKmB,QAAQvB,EAAEwB,OAAOC,KAAKhB,EAAML,KAAKsB,QAE3C,IAAIC,GAAW3B,EAAE4B,GAAG,OAAOC,KAAK,QAAQ,sBAAsBC,IAAI,UAAU,OAC5E9B,GAAEM,KAAKF,KAAK2B,QAAQ,SAASC,EAAEC,GACT,iBAAVA,GAAG,KACbA,EAAG,GAAK,uBAAuBA,EAAG,GAAG,QAAQ,OAAO,MAAMA,EAAG,GAAG,MAAM,MAAM,WAE7EA,EAAG,GAAK,WAAWA,EAAG,IAAI,iBAAiBC,KAAKD,EAAG,IAAM,IAAM,IAAI,YAEnEN,EAASQ,OAAO,MAAMF,EAAGG,KAAK,KAAK,UAGpCT,EAASU,YAAY7B,GAAOQ,YAC5BR,EAAMG,YAAY,6BACf2B,OAAO,WACVvC,GAAa,WAMhBwC,QAAQ,eAAepC,GAAG,QAAQ,WAAW,WAC/C,GAAIqC,GAAKxC,EAAEyC,QAAQC,OACnB,IAAS,IAALF,EAAS,CACZ,GAAIhC,GAAQR,EAAEI,MACbuC,EAAMnC,EAAMoC,SACZC,EAAMF,EAAIC,SACVE,EAAMD,EAAIxC,SAAS,OAAO0C,OAE3BD,GAAIzC,SAAS,SAAS2C,KAAK,WAC1B,MAAO,KAAKhD,EAAEI,MAAMgB,OAAO,MAE5B0B,EAAMA,EAAIE,OAAOC,MAAM,QAEvBjD,EAAEwB,OAAO0B,KAAK,4BAA4BL,EAAIxC,SAAS,YAAYe,OAAO,yBAErDuB,EAAItC,SAAS,QAAQ2C,OAAOG,OAAOC,QAAQ,OAAO,KAAK,yDAItDN,EAAI,GAAG,+BAEN9C,EAAE4B,GAAG,OAAOoB,KAAKF,EAAI,IAAI1B,OAAO","file":"logs.min.js","sourcesContent":["DocReady.push(function Logs(){\r\n\tvar requesting = false;\r\n\r\n\t$('#logs').find('tbody').off('page-switch').on('page-switch',function(){\r\n\t\t$(this).children().each(function(){\r\n\t\t\tvar $row = $(this);\r\n\r\n\t\t\t$row.find('.expand-section').off('click').on('click',function(){\r\n\t\t\t\tvar $this = $(this),\r\n\t\t\t\t\ttitle = 'Log entry details';\r\n\r\n\t\t\t\tif ($this.hasClass('typcn-minus')) $this.toggleClass('typcn-minus typcn-plus').next().stop().slideUp();\r\n\t\t\t\telse {\r\n\t\t\t\t\tif ($this.next().length === 1)\r\n\t\t\t\t\t\t$this.toggleClass('typcn-minus typcn-plus').next().stop().slideDown();\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (requesting) return false;\r\n\t\t\t\t\t\trequesting = true;\r\n\r\n\t\t\t\t\t\tvar EntryID = parseInt($row.children().first().text());\r\n\r\n\t\t\t\t\t\t$.post('/logs/details/'+EntryID, $.mkAjaxHandler(function(){\r\n\t\t\t\t\t\t\tif (!this.status) $.Dialog.fail(title,this.message);\r\n\r\n\t\t\t\t\t\t\tvar $dataDiv = $.mk('div').attr('class','expandable-section').css('display','none');\r\n\t\t\t\t\t\t\t$.each(this.details,function(i,el){\r\n\t\t\t\t\t\t\t\tif (typeof el[1] === 'boolean')\r\n\t\t\t\t\t\t\t\t\tel[1] = '<span class=\"color-'+(el[1]?'green':'red')+'\">'+(el[1]?'yes':'no')+'</span>';\r\n\r\n\t\t\t\t\t\t\t\tel[0] = '<strong>'+el[0]+(/[\\wáéíóöőúüű]$/.test(el[0]) ? ':' : '')+'</strong>';\r\n\r\n\t\t\t\t\t\t\t\t$dataDiv.append('<p>'+el.join(' ')+'</p>');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t$dataDiv.insertAfter($this).slideDown();\r\n\t\t\t\t\t\t\t$this.toggleClass('typcn-minus typcn-plus');\r\n\t\t\t\t\t\t})).always(function(){\r\n\t\t\t\t\t\t\trequesting = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}).trigger('page-switch').on('click','.dynt-el',function(){\r\n\t\tvar ww = $(window).width();\r\n\t\tif (ww < 650){\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\t$td = $this.parent(),\r\n\t\t\t\t$tr = $td.parent(),\r\n\t\t\t\t$ip = $tr.children('.ip').clone();\r\n\r\n\t\t\t$ip.children('.self').html(function(){\r\n\t\t\t\treturn ' ('+$(this).text()+')';\r\n\t\t\t});\r\n\t\t\t$ip = $ip.html().split('<br>');\r\n\r\n\t\t\t$.Dialog.info('Hidden details of entry #'+$tr.children('.entryid').text(),'\\\r\n\t\t\t\t<b>Timestamp:</b> '+$td.children('time').html().trim().replace(/<br>/,' ')+'\\\r\n\t\t\t\t<span class=\"modal-ip\"><br>\\\r\n\t\t\t\t\t<b>Initiator:</b> '+$ip[0]+'<br>\\\r\n\t\t\t\t\t<b>IP Address:</b> '+$.mk('div').html($ip[1]).text()+'\\\r\n\t\t\t\t</span>'\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}