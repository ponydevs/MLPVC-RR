"use strict";$(function(){if(void 0!==window.ROLES){var e=$content.children(".briefing"),o=e.find(".username").text().trim(),t=e.find(".role-label").text().trim(),n=$.mk("form").attr("id","rolemod").html('<select name="newrole" required><optgroup label="Possible roles"></optgroup></select>'),i=n.find("optgroup"),a=$("#change-role"),r=$("#change-dev-role-mask");$.each(window.ROLES,function(e,t){i.append("<option value="+e+">"+t+"</option>")}),a.on("click",function(){$.Dialog.request("Change group",n.clone(),"Change",function(n){var i=n.find("option").filter(function(){return this.innerHTML===t}).attr("selected",!0);n.on("submit",function(e){if(e.preventDefault(),n.children("select").val()===i.attr("value"))return $.Dialog.close();var t=n.mkData();$.Dialog.wait(!1,"Moving user to the new group"),$.post("/user/setgroup/"+o,t,$.mkAjaxHandler(function(){return!0===this.already_in?$.Dialog.close():this.status?void $.Navigation.reload(!0):$.Dialog.fail(!1,this.message)}))})})}),r.on("click",function(){$.Dialog.request(r.attr("title"),n.clone(),"Change",function(n){var i=n.find("option").filter(function(){return this.innerHTML===t}).attr("selected",!0);n.on("submit",function(e){if(e.preventDefault(),n.children("select").val()===i.attr("value"))return $.Dialog.close();var t=n.mkData();$.Dialog.wait(!1,"Changing role mask"),$.post("/user/setdevrolemask",t,$.mkAjaxHandler(function(){if(!this.status)return $.Dialog.fail(!1,this.message);$.Navigation.reload(!0)}))})})})}});
//# sourceMappingURL=/js/min/pages/user/manage.js.map
