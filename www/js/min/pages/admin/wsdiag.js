"use strict";!function(){var e=void 0,s=$("#send-hello"),t=$("#wss-status").children(),i=$("#wss-heartbeat"),l=function(){if(t.parent().is(":hover"))i.addClass("paused");else{if(i.removeClass("paused"),$.WS.down)return clearInterval(e),t.text("Socket.IO server is down and/or client library failed to load"),i.addClass("dead"),void s.disable();$.WS.devquery("status",{},function(e){i.removeClass("beat"),setTimeout(function(){i.addClass("beat")},20),delete e.status,t.text(JSON.stringify(e,null,4))})}};l(),e=setInterval(l,1e3),s.on("click",function(){$.Dialog.wait("Test PHP to WS server connectivity","Sending hello");var t=$.randomString(),e=$.WS.getClientId(),i=!1;$w.on("ws-hello",function(e,s){s.priv===t&&($w.off("ws-hello"),i=!0,$.Dialog.success(!1,"Hello response received",!0))}),$.get("/api/admin/wsdiag/hello",{priv:t,clientid:e},$.mkAjaxHandler(function(){if(!this.status)return $.Dialog.fail(!1,this.message);i||$.Dialog.success(!1,"Hello sent successfully"),i||$.Dialog.wait(!1,"Waiting for reply (timeout 5s)"),setTimeout(function(){i||($w.off("ws-hello"),$.Dialog.fail(!1,"Hello response timed out"))},5e3)}))})}();
//# sourceMappingURL=/js/min/pages/admin/wsdiag.js.map
