"use strict";!function(t){var e=t.mk("div").attr("id","ctxmenu");function n(e,n){return"function"==typeof n&&(n=n(e)),e.data("ctxmenu-items")instanceof jQuery?n&&e.data("ctxmenu-items").children().first().text(n):e.data("ctxmenu-items",(new jQuery).add(t.mk("li").text(n||"Context menu"))),e}function a(n,a){if(n){var i=t.mk("li");if(n===t.ctxmenu.separator)i.addClass("sep");else{var c=t.mk("a");n.text&&c.text(n.text),n.icon&&c.addClass("typcn typcn-"+n.icon),!0===n.default&&c.addClass("default"),void 0!==n.attr&&("string"==typeof n.attr?c.attr(n.attr,!0):c.attr(n.attr)),"function"==typeof n.click&&c.on("click",function(t){t.stopPropagation(),t.preventDefault(),n.click.call(a.get(0),t),e.hide()}),c.appendTo(i)}a.data("ctxmenu-items",a.data("ctxmenu-items").add(i))}}e.appendTo($body).on("click",function(t){t.stopPropagation(),e.hide()}).on("contextmenu",function(e){var n=t(e.target);switch(e.target.nodeName.toLowerCase()){case"li":n.children("a").trigger("click");break;case"a":n.trigger("click")}return!1}),t.ctxmenu={separator:!0},t.ctxmenu.setTitle=function(){return n.apply(this,arguments)},t.fn.ctxmenu=function(i,c){return t(this).each(function(){var o=t(this);n(o,c),t.each(i,function(t,e){a(e,o)}),o.on("contextmenu",function(n){if(!n.shiftKey){n.preventDefault(),n.stopPropagation(),o.trigger("mouseleave"),e.html(o.data("ctxmenu-items").clone(!0,!0)).css({top:n.pageY,left:n.pageX,opacity:0}).show();var a=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0),c=t(document).scrollTop(),r=e.position(),u=(r.top>i+c||r.top>i-c)&&n.pageY-e.outerHeight(),d=(r.left<0-e.width()||r.left>a)&&n.pageX-e.outerWidth();!1!==u&&e.css("top",u),!1!==d&&e.css("left",d),e.css("opacity",1)}}).addClass("ctxmenu-bound")})},t.ctxmenu.addItem=t.ctxmenu.addItems=function(e){var i=arguments.length;if(i<2)throw new Error("Invalid number of arguments ("+i+") for $.ctxmenu.addItems");var c=t.toArray(arguments);c.splice(0,1),e.each(function(){var e=t(this);if(void 0===e.data("ctxmenu-items"))return e.ctxmenu(c);n(e),t.each(c,function(t,n){return a(n,e)})})},t.ctxmenu.triggerItem=function(t,e){var n=t.data("ctxmenu-items").filter(":not(.sep)");if(e<1||n.length-1<e)throw new Error("There's no such menu option: "+e);n.eq(e).children("a").triggerHandler("click")},t.ctxmenu.setDefault=function(t,e){var n=t.data("ctxmenu-items").filter(":not(.sep)");n.find("a").removeClass("default"),n.eq(e).children("a").addClass("default")},t.ctxmenu.runDefault=function(t){return t.data("ctxmenu-items").find("a.default").trigger("click")},$body.on("click contextmenu",function(){e.hide()}),$w.on("blur resize",function(){e.hide()})}(jQuery);
//# sourceMappingURL=/js/min/jquery.ctxmenu.js.map
