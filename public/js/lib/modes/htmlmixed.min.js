"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?t(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],t):t(CodeMirror)}(function(p){var o={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var l={};function g(t,e){var n,a=t.match(l[n=e]||(l[n]=new RegExp("\\s+"+n+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")));return a?/^\s*(.*?)\s*$/.exec(a[2])[1]:""}function y(t,e){return new RegExp((e?"^":"")+"</s*"+t+"s*>","i")}function r(t,e){for(var n in t)for(var a=e[n]||(e[n]=[]),o=t[n],l=o.length-1;0<=l;l--)a.unshift(o[l])}p.defineMode("htmlmixed",function(u,t){var m=p.getMode(u,{name:"xml",htmlMode:!0,multilineTagIndentFactor:t.multilineTagIndentFactor,multilineTagIndentPastTag:t.multilineTagIndentPastTag}),d={},e=t&&t.tags,n=t&&t.scriptTypes;if(r(o,d),e&&r(e,d),n)for(var a=n.length-1;0<=a;a--)d.script.unshift(["type",n[a].matches,n[a].mode]);function f(t,e){var n,a=m.token(t,e.htmlState),o=/\btag\b/.test(a);if(o&&!/[<>\s\/]/.test(t.current())&&(n=e.htmlState.tagName&&e.htmlState.tagName.toLowerCase())&&d.hasOwnProperty(n))e.inTag=n+" ";else if(e.inTag&&o&&/>$/.test(t.current())){var l=/^([\S]+) (.*)/.exec(e.inTag);e.inTag=null;var r=">"==t.current()&&function(t,e){for(var n=0;n<t.length;n++){var a=t[n];if(!a[0]||a[1].test(g(e,a[0])))return a[2]}}(d[l[1]],l[2]),i=p.getMode(u,r),c=y(l[1],!0),s=y(l[1],!1);e.token=function(t,e){return t.match(c,!1)?(e.token=f,e.localState=e.localMode=null,null):(n=t,a=s,o=e.localMode.token(t,e.localState),l=n.current(),-1<(r=l.search(a))?n.backUp(l.length-r):l.match(/<\/?$/)&&(n.backUp(l.length),n.match(a,!1)||n.match(l)),o);var n,a,o,l,r},e.localMode=i,e.localState=p.startState(i,m.indent(e.htmlState,""))}else e.inTag&&(e.inTag+=t.current(),t.eol()&&(e.inTag+=" "));return a}return{startState:function(){return{token:f,inTag:null,localMode:null,localState:null,htmlState:p.startState(m)}},copyState:function(t){var e;return t.localState&&(e=p.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:e,htmlState:p.copyState(m,t.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(t,e,n){return!t.localMode||/^\s*<\//.test(e)?m.indent(t.htmlState,e):t.localMode.indent?t.localMode.indent(t.localState,e,n):p.Pass},innerMode:function(t){return{state:t.localState||t.htmlState,mode:t.localMode||m}}}},"xml","javascript","css"),p.defineMIME("text/html","htmlmixed")});