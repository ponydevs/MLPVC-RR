"use strict";!function(){var t=window.AppearanceID,l=window.AppearanceColors,e=window.SpriteColorList,i=$.mk("table").appendTo($("#input-cont").empty()),o=void 0,s={},n=1,a=function(e,t){for(var n=[],r=0,i=l.length;r<i;r++){var o=l[r];o[e]===t&&(n.push(o),l[r].detected=!0)}return n.length||n.push({label:"(unrecognized color)",hex:""}),n};$.each(l,function(e,t){s[t.label]=n++}),$.ajax({url:"/cg/v/"+t+"s.svg?t="+Math.round((new Date).getTime()/1e3),dataType:"html",success:function(e){o=$(e),$("#svg-cont").html(o),o.children().each(function(){var e=$(this),t=e.attr("stroke");e.addClass($.RGBAColor.parse(t).isLight()?"bright":"dark"),e.on("mouseenter",function(){e.addClass("highlight"),i.find("td.color").filter(function(){return this.innerHTML.trim()===t}).parent().addClass("force-hover")}).on("mouseleave",function(){e.removeClass("highlight"),i.find(".force-hover").removeClass("force-hover")})})}}),$.each(e,function(e,t){var n=a("hex",t),r=[];$.each(n,function(e,t){r.push("<li>"+t.label+"</li>")}),i.append($.mk("tr").html('<td class="color-preview" style="background-color:'+t+'"></td>\n\t\t\t\t<td class="label"><ul>'+r.join("")+'</ul></td>\n\t\t\t\t<td class="color">'+t+"</td>").on("mouseenter",function(){o instanceof jQuery&&o.children().filter('[stroke="'+t+'"]').addClass("highlight")}).on("mouseleave",function(){o instanceof jQuery&&o.find(".highlight").removeClass("highlight")}))}),i.children("tr").sort(function(e,t){var n=s[$(e).children("td.label li").first().text()]||-1,r=s[$(t).children("td.label li").first().text()]||-1;return n===r?0:n<r?-1:1}).prependTo(i),$.each(l,function(e,t){if(!t.detected&&!/^(Mannequin|Teeth & Mouth|Tears|Eyes?)\s\|/.test(t.label)){var n=a("hex",t.hex),r=[];$.each(n,function(e,t){r.push("<li>"+t.label+"</li>")}),i.prepend($.mk("tr").html('<td class="color-preview" style="background-color:'+t.hex+'"></td>\n\t\t\t\t<td class="label missing"><ul>'+r.join("")+'</ul></td>\n\t\t\t\t<td class="color">'+t.hex+"</td>"))}}),$("#server-side-check").on("click",function(e){e.preventDefault(),$.Dialog.wait("Server-side sprite color check"),$.API.post("/cg/appearance/"+t+"/sprite/check-colors",$.mkAjaxHandler(function(){if(!this.status)return $.Dialog.fail(!1,this.message);$.Dialog.segway(!1,this.message)}))})}();